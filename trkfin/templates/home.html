{% extends "base.html" %}

{% block title %} | Home{% endblock %}

{% block main %}

<div name='form'>
  {% include "forms/mainform.html" %}
</div>

{% if wallets %}

<div name='wallets'>

  <div style="margin: 2rem;">
    <h6>Initial</h6>
    <div style="display: flex;">
    {% for group in wallets['groups'] %}
      <table class='table' style="margin: 2rem;">
        <caption>{{ group or '.' }}</caption>
        {% for w_id in wallets['groups'][group] %}
        <tr>
          <td>{{ wallets['groups'][group][w_id]['name'] }}:</td>
          <td>{{ wallets['groups'][group][w_id]['balance_initial'] }}</td>
        </tr>
        {% endfor %}
        <tr>
          <th>sum:</th>
          <th>{{ wallets['sums'][group]['balance_initial_sum'] }}</th>
        </tr>
      </table>
    {% endfor %}
    </div>
  </div>

  <div style="margin: 2rem;">
    <h6>Income</h6>
    <div style="display: flex;">
    {% for group in wallets['groups'] %}
      <table class='table' style="margin: 2rem;">
        <caption>{{ group or '.' }}</caption>
        {% for w_id in wallets['groups'][group] %}
        <tr>
          <td>{{ wallets['groups'][group][w_id]['name'] }}:</td>
          <td>+{{ wallets['groups'][group][w_id]['income'] }}</td>
        </tr>
        {% endfor %}
        <tr>
          <th>sum:</th>
          <th>+{{ wallets['sums'][group]['income_sum'] }}</th>
        </tr>
      </table>
    {% endfor %}
    </div>
  </div>
  
  <div style="margin: 2rem;">
    <h6>Spendings</h6>
    <div style="display: flex;">
    {% for group in wallets['groups'] %}
      <table class='table' style="margin: 2rem;">
        <caption>{{ group or '.' }}</caption>
        {% for w_id in wallets['groups'][group] %}
        <tr>
          <td>{{ wallets['groups'][group][w_id]['name'] }}:</td>
          <td>{{ wallets['groups'][group][w_id]['spendings'] }}</td>
        </tr>
        {% endfor %}
        <tr>
          <th>sum:</th>
          <th>{{ wallets['sums'][group]['spendings_sum'] }}</th>
        </tr>
      </table>
    {% endfor %}
    </div>
  </div>

  <div style="margin: 2rem;">
    <h6>Transfers</h6>
    <div style="display: flex;">
    {% for group in wallets['groups'] %}
      <table class='table' style="margin: 2rem;">
        <caption>{{ group or '.' }}</caption>
        {% for w_id in wallets['groups'][group] %}
        <tr>
          <td>{{ wallets['groups'][group][w_id]['name'] }}:</td>
          <td>{{ wallets['groups'][group][w_id]['transfers_from'] }}</td>
          <td>{{ wallets['groups'][group][w_id]['transfers_to'] }}</td>
        </tr>
        {% endfor %}
        <tr>
          <th>sum:</th>
          <th>{{ wallets['sums'][group]['transfers_from_sum'] }}</th>
          <th>{{ wallets['sums'][group]['transfers_to_sum'] }}</th>
        </tr>
      </table>
    {% endfor %}
    </div>
  </div>

  <div style="margin: 2rem;">
    <h6>Balance</h6>
    <div style="display: flex;">
    {% for group in wallets['groups'] %}
      <table class='table' style="margin: 2rem;">
        <caption>{{ group or '.' }}</caption>
        {% for w_id in wallets['groups'][group] %}
        <tr>
          <td>{{ wallets['groups'][group][w_id]['name'] }}:</td>
          <td>{{ wallets['groups'][group][w_id]['balance_current'] }}</td>
        </tr>
        {% endfor %}
        <tr>
          <th>sum:</th>
          <th>{{ wallets['sums'][group]['balance_current_sum'] }}</th>
        </tr>
      </table>
    {% endfor %}
    </div>
  </div>

</div>
{% endif %}

{% endblock %}
