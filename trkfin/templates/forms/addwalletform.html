<style>
  #type-input {
    display: none;
  }  
</style>

<form name='addwalletform' action="" method="POST">
  
  {{ form.hidden_tag() }}

  <div class='form'>
    <div class='form-vert'>
      <div class='form-horiz'>
        <span class='input-group'>
          <div class="input-group-prepend">
            {{ form.type.label(class_="input-group-text") }}
          </div>
          {{ form.type(class_="form-control") }}
        </span>
      </div>
      <div class='form-horiz' id='type-input'>
        {{ form.type_new(class_="form-control") }}
      </div>
    </div>
    <div class='form-vert'>
      <div class='form-horiz'>
        <span class='input-group'>
          <div class="input-group-prepend">
            {{ form.name.label(class_="input-group-text") }}
          </div>
          {{ form.name(class_="form-control") }}
        </span>
      </div>
      <div class='form-horiz'>
        <span class='input-group'>
          <div class="input-group-prepend">
            {{ form.amount.label(class_="input-group-text") }}
          </div>
          {{ form.amount(class_="form-control") }}
        </span>
        {{ form.submit(class_="btn btn-secondary") }}
      </div>
    </div>
  </div>

  <div>
    {% for error in form.hidden_tag.errors %}
      hidden: <span style="color: red;">[{{ error }}]</span>
    {% endfor %}
    {% for error in form.type.errors %}
      type: <span style="color: red;">[{{ error }}]</span>
    {% endfor %}
    {% for error in form.type_new.errors %}
      type_new: <span style="color: red;">[{{ error }}]</span>
    {% endfor %}
    {% for error in form.name.errors %}
      name: <span style="color: red;">[{{ error }}]</span>
    {% endfor %}
    {% for error in form.amount.errors %}
      amount: <span style="color: red;">[{{ error }}]</span>
    {% endfor %}
  </div>

</form>

<script>
  
  const type_select = document.querySelector('#type');
  
  // hide type-input
  function hide_type_input() {
    if (type_select.value == 'New') {
      document.querySelector('#type-input').style.display = 'block';
    }
    else {
      document.querySelector('#type-input').style.display = 'none';
    }
  }
  hide_type_input();

  // grey out None and New types
  function grey_types() {
    if (type_select.value == "" || type_select.value == "New") {
      type_select.style.color = '#6c757d';
      type_select.style.fontStyle = 'italic';
    }
    else {
      type_select.style.color = 'black';
      type_select.style.fontStyle = 'normal';
    }
  }
  grey_types();

  document.querySelector('#type').addEventListener('change', function() {
    hide_type_input();
    grey_types();
  });
</script>
